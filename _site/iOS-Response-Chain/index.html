<!DOCTYPE html>
<html lang="en" class="light">

<title>事件传递：响应者链条（译） | Darren&#39;s Blog</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Reveal是一款UI调试工具，在iOS开发过程中可查看UI的层级关系并可动态修改界面，可以有效提高开发效率。这篇文章主要介绍如何把Reveal集成到实际的项目中。">
<meta name="author" content="Darren Ou">
<meta name="generator" content="Jekyll v3.8.5">
<link rel="canonical" href="http://localhost:4000/iOS-Response-Chain/">
<link rel="stylesheet" href="/assets/css/index.css">
<link rel="stylesheet" href="/assets/css/theme.css">
<link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Darren's Blog" />




<header class="dark">
  
  
    <nav>
    
      
        <a href="/">Home</a>
      
    
      
        <a href=""></a>
      
    
    </nav>
  
  
</header>

<article>
  <header><h1><a href="/iOS-Response-Chain/">事件传递：响应者链条（译）</a></h1>
    <time datetime="2017-01-13T00:00:00+08:00">January 13, 2017</time>
  </header>
<p>Reveal是一款UI调试工具，在iOS开发过程中可查看UI的层级关系并可动态修改界面，可以有效提高开发效率。这篇文章主要介绍如何把Reveal集成到实际的项目中。</p>

<p>一、Reveal主要有两种集成方式：
1、framework集成（可忽略，直接看第二点）
（1）打开Reveal，选择 Reveal –&gt; Help –&gt; Show Reveal Library in Finder –&gt; iOS Library</p>

<p>（2）把Reveal.framework导入到项目中</p>

<p>（3）配置Target，Target –&gt; Build Setting –&gt; Other Linker Flags 添加以下4项：</p>

<p>（4）运行项目 –&gt; 打开Reveal –&gt; 选择连接设备</p>

<p>项目的UI图层就可以出来了。</p>

<p>这种方法有几个弊端：1、需要配置项目的Build Setting，修改Other Linker Flags，多人协作开发的话如果有人没有配置就会编译出错；2、如果不留意容易打包的时候把Reveal的framework也打包进去，增大包的体积。</p>

<p>以下推荐另一种集成方法。</p>

<p>2、LLDB集成（推荐！！）
（1）运行项目 –&gt; 点击Pause program execution。</p>

<p>（2）在LLDB依次输入以下两条命令</p>

<h1 id="expr-classnsclassfromstringibarevealloader--nil--voiddlopenapplicationsrevealappcontentssharedsupportios-librarieslibrevealdylib-0x2--void0">expr (Class)NSClassFromString(@”IBARevealLoader”) == nil ? (void<em>)dlopen(“/Applications/Reveal.app/Contents/SharedSupport/iOS-Libraries/libReveal.dylib”, 0x2) : ((void</em>)0)</h1>

<h1 id="expr-voidnsnotificationcenter-nsnotificationcenter-defaultcenter-postnotificationnameibarevealrequeststart-objectnil">expr (void)[(NSNotificationCenter *)[NSNotificationCenter defaultCenter] postNotificationName:@”IBARevealRequestStart” object:nil];</h1>

<p>第一条命令用于加载Reveal的动态链接库；</p>

<p>第二条命令用于启动Reveal调试服务。</p>

<p>输入两条命令后，如果LLDB打印 “ INFO: Reveal Server started ” 即成功启动Reveal服务，点击Continue即可。</p>

<p>虽然说输入两条命令即可启动服务，但是每次重新启动项目后都要重新输入这么长的命令也是挺苦恼的，下面介绍一种方法可以非常方便地使用Reveal的命令。</p>

<p>二、设置LLDB命令别名
打开终端，输入 vim ~/.lldbinit ，然后输入以下内容：</p>

<p>command alias reveal_load_sim expr (Class)NSClassFromString(@”IBARevealLoader”) == nil ? (void<em>)dlopen(“/Applications/Reveal.app/Contents/SharedSupport/iOS-Libraries/libReveal.dylib”, 0x2) : ((void</em>)0)</p>

<p>command alias reveal_start expr (void)[(NSNotificationCenter*)[NSNotificationCenter defaultCenter] postNotificationName:@”IBARevealRequestStart” object:nil];</p>

<p>command alias reveal_stop expr (void)[(NSNotificationCenter*)[NSNotificationCenter defaultCenter] postNotificationName:@”IBARevealRequestStop” object:nil];</p>

<p>reveal_load_sim为模拟器加载reveal调试用的动态链接库</p>

<p>reveal_start启动reveal调试功能</p>

<p>reveal_stop结束reveal调试功能</p>

<p>输入 :wq 保存
这时候打开Xcode，在LLDB里面就会有输入提示了。</p>

<p>按顺序输入reveal_load_sim –&gt; reveal_start 即可达到上面的效果。</p>

<p>参考资料
iOS开发中集成Reveal</p>

<p>UI调试神器 for ios：Reveal的使用与破解</p>

  
  
</article>



</html>
